<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="./src/images/favicon.png"/>
    <link rel="stylesheet" href="./src/style.css">
    <title>Igor and Maria</title>
</head>
<body>
    <section class="banner">
        <div class="banner__content">
            <h2 class="banner__names">
                <span class="banner__names-his">Игорь</span>
                <span class="banner__names-and">и</span>
                <span class="banner__names-her">Мария</span>
            </h2>
            <p class="banner__text">Дорогие родные и близкие!</p>
            <p class="banner__text">Приглашаем вас на нашу свадьбу!</p>
        </div>
    </section>
    <div class="container">
        <section class="wedding-date">
            <h3 class="section-header">Дата торжества</h3>
            <img class="wedding-date__calendar" src="./src/images/calendar.jpg" alt="Date on calendar">
        </section>
        <section class="timetable">
            <h3 class="section-header">Программа дня</h3>
            <div class="timetable__steps">
                <div class="timetable__step">
                    <p class="timetable__step-time">11:30</p>
                    <div class="timetable__step-img"></div>
                    <h4 class="timetable__step-title">Венчание</h4>
                </div>
                <div class="timetable__line"></div>
                <div class="timetable__step">
                    <p class="timetable__step-time"></p>
                    <div class="timetable__step-img"></div>
                    <h4 class="timetable__step-title">Что-то</h4>
                </div>
                <div class="timetable__line"></div>
                <div class="timetable__step">
                    <p class="timetable__step-time">13:30</p>
                    <div class="timetable__step-img"></div>
                    <h4 class="timetable__step-title">Банкет</h4>
                </div>
                <div class="timetable__line"></div>
                <div class="timetable__step">
                    <p class="timetable__step-time">00:00</p>
                    <div class="timetable__step-img"></div>
                    <h4 class="timetable__step-title">Завершение торжества</h4>
                </div>
            </div>
        </section>
        <section class="location">
            <h3 class="section-header">Место проведения</h3>
            <div class="location__image"></div>
            <p class="location__text">Наш банкет пройдет по адресу: <br>г. Лунинец, ул. Давыдова, д. 11</p>
            <a class="location__link" href="https://yandex.by/maps/102225/luninets/house/Zk8YfgNkS0AAQFtofX51dXRiZw==/?display-text=Продукты&ll=26.844086%2C52.244759&mode=search&sctx=ZAAAAAgBEAAaKAoSCa8FvTeG2DpAEbOY2HxcH0pAEhIJoUyjycUYeD8RlIWvr3WpYT8iBgABAgMEBSgKOABA0Z4GSAFqAnVhnQHNzEw9oAEAqAEAvQHIQ5mjwgEBAIICENCf0YDQvtC00YPQutGC0YuKAmIxODQxMDgwMzEkMTg0MTA4MDc5JDE4NDEwODAyOSQyMTU4MzkwNjIzNzUkMTg0MTA4MDI3JDE4NDEwODAyNSQxODQxMDgwMzMkMTg3MTQyMDY1NTY5JDIyOTcyODgyNzIyMJICAJoCDGRlc2t0b3AtbWFwc6oCDDE3MDgzNjc4OTA1MQ%3D%3D&sll=26.844086%2C52.244759&source=serp_navig&sspn=0.000504%2C0.000291&text=Продукты&z=20.83" target="_blank">Перейти на карту</a>
        </section>
        <section class="questions" id="questions">
            <div class="form-wrapper" id="form-wrapper">
                <h3 class="section-header">Ваше присутствие</h3>
                <p class="questions__text">Подтвердите свое присутствие и ответьте на несколько вопросов.<br> Это поможет в организации торжества!<br> Будем ждать ваш ответ до 15.08.2024</p>
                <form id="attendance-form" action="https://docs.google.com/forms/d/e/1FAIpQLSfaN-O9nHb9eAJ4kmPle-BvZNJqAeinG12hhrBU80-O-NtzmQ/formResponse" method="POST" onsubmit="handleFormSubmit(event)">
                    <div class="form-element">
                        <span class="form-element__title">Фамилия Имя</span>
                        <input class="form-element__text-input" type="text" name="entry.877086558" placeholder="Например: Антон и Анна Ивановы" required>
                    </div>
                    <div class="form-element radio-buttons">
                        <span class="form-element__title">Сможете ли Вы присутствовать?</span>
                        <label class="radio-label" for="yes">
                            <input type="radio" name="entry.1498135098" id="yes" value="Смогу / сможем присутствовать" required>
                            <span class="radio-label__text">Смогу / сможем присутствовать</span>
                        </label>
                        <label class="radio-label" for="later">
                            <input type="radio" name="entry.1498135098" id="later" value="Затрудняюсь ответить, сообщу позже">
                            <span class="radio-label__text">Затрудняюсь ответить, сообщу позже</span>
                        </label>
                        <label class="radio-label" for="no">
                            <input type="radio" name="entry.1498135098" id="no" value="Не смогу прийти">
                            <span class="radio-label__text">Не смогу прийти</span>
                        </label>
                    </div>
                    <div class="form-element">
                        <span class="form-element__title">Будете ли вы один / одна / с парой / с семьей? (перечислите в строке ниже)</span>
                        <input class="form-element__text-input" type="text" name="entry.2606285" placeholder="Например: Я, жена, двое детей" required>
                    </div>
                    <button type="submit" class="form-btn">Отправить ответ</button>
                </form>
            </div>
                <div class="timer-wrapper" id="timer" hidden>
                    <h3 class="section-header">До свадьбы осталось</h3>
                    <div class="timer__box">
                        <div class="timer">
                            <div class="timer__label">Дни</div>
                            <div class="timer__value days"></div>
                        </div>
                        <div class="timer">
                            <div class="timer__label">Часы</div>
                            <div class="timer__value hours"></div>
                        </div>
                        <div class="timer">
                            <div class="timer__label">Минуты</div>
                            <div class="timer__value minutes"></div>
                        </div>
                        <div class="timer">
                            <div class="timer__label">Секунды</div>
                            <div class="timer__value seconds"></div>
                        </div>
                    </div>
                </div>
        </section>
        <section class="waiting">
            <h3 class="section-header">Будем Вас ждать!</h3>
            <div class="waiting__image"></div>
        </section>
    </div>

    <script>

        window.onload = function() {
            const deadline = new Date("August 2, 2024 00:00:00").getTime();
            initializeClock('questions', deadline);
        }
        
        async function handleFormSubmit(event) {
            event.preventDefault();
            let timerWrapper = document.querySelector("#timer");
            let formWrapper = document.querySelector("#form-wrapper");

            timerWrapper.removeAttribute("hidden"); 
            formWrapper.setAttribute("hidden", "");

            const form = event.target;
            const formData = new FormData(form);

            try {
                await fetch(form.action, {
                    method: form.method,
                    body: formData,
                    mode: 'no-cors'
                });
                console.log("Form submitted successfully");
            } catch (error) {
                console.error("Error submitting form:", error);
            }
        }

        function updateTimer(deadline) {
            const now = new Date().getTime();
            const t = deadline - now;

            const days = Math.floor(t / (1000 * 60 * 60 * 24));
            const hours = Math.floor((t % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((t % (1000 * 60)) / 1000);

            return {
                'total': t,
                'days': days,
                'hours': hours,
                'minutes': minutes,
                'seconds': seconds
            };
        }

        function initializeClock(id, deadline) {
            const clock = document.getElementById(id);
            const daysSpan = clock.querySelector('.days');
            const hoursSpan = clock.querySelector('.hours');
            const minutesSpan = clock.querySelector('.minutes');
            const secondsSpan = clock.querySelector('.seconds');

            function updateClock() {
                const t = updateTimer(deadline);

                daysSpan.innerHTML = ('0' + t.days).slice(-2);
                hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
                minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
                secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

                if (t.total <= 0) {
                    clearInterval(timeinterval);
                }
            }

            updateClock();
            const timeinterval = setInterval(updateClock, 1000);
        }
    </script>
</body>
</html>